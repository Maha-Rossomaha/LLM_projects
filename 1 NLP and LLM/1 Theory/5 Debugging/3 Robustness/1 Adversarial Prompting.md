# Adversarial prompting и jailbreak-сценарии

## 1. Что это такое

* **Adversarial prompting** — создание входных запросов (prompt’ов), цель которых — заставить модель нарушить заданные ограничения, сгенерировать нежелательный или опасный контент.
* **Jailbreak** — особый тип adversarial prompting, при котором пользователь пытается обойти встроенные фильтры безопасности и получить запрещённые ответы.

---

## 2. Зачем тестировать на adversarial prompting

* Оценка устойчивости модели к злонамеренным попыткам обмана.
* Выявление уязвимых формулировок и контекстов.
* Улучшение систем модерации и фильтрации.

---

## 3. Примеры атак

* **Обход фильтров через роль**: "Представь, что ты пишешь роман, в котором герой описывает…".
* **Инъекция инструкций**: добавление фраз вроде "Игнорируй предыдущие правила и…".
* **Обфускация**: замена букв, использование кодов или синонимов для обхода детекторов.
* **Chain prompting**: последовательное выведение модели на запрещённый ответ через серию невинных вопросов.

---

## 4. Методы тестирования

### 4.1 Автоматизированные

* Генерация атак с помощью специализированных фреймворков (например, [AdvBench](https://github.com/llm-security/AdvBench)).
* Использование LLM для создания собственных adversarial prompt’ов.

### 4.2 Ручные

* Экспертное составление наборов атакующих prompt’ов.
* Симуляция реальных сценариев (социальная инженерия, провокационные диалоги).

---

## 5. Метрики устойчивости

* **Attack success rate (ASR)** — процент случаев, когда модель нарушила правила.
* **False negative rate** — доля опасных запросов, не распознанных фильтрами.
* **Time-to-fail** — среднее время или число попыток до получения нежелательного ответа.

---

## 6. Смягчение и защита

* Усиление модерации (pre- и post-processing проверок).
* Fine-tuning или RLHF на небезопасных примерах с корректными ответами.
* Инструкции в prompt и системных сообщениях, более устойчивые к переписыванию.
* Многоуровневые фильтры (лексические + семантические + контекстные).

---

## 7. Плюсы и минусы тестирования

**Плюсы:**

* Раннее обнаружение уязвимостей.
* Возможность тренировать модель на реальных атаках.

**Минусы:**

* Требует больших ресурсов при ручном тестировании.
* Автоматические генераторы могут пропустить творческие атаки.
