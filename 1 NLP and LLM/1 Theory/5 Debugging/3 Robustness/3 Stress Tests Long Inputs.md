# Стресс-тесты на длинных и запутанных вводах

## 1. Что это такое

Стресс-тесты на длинных и запутанных вводах — это серия проверок, где модель получает запросы с большим объёмом текста, сложной структурой и отвлекающими элементами, чтобы оценить её способность обрабатывать перегруженную и запутанную информацию.

---

## 2. Зачем нужны такие тесты

* **Оценка пределов контекстного окна**: проверка, насколько модель справляется при приближении или превышении лимита токенов.
* **Выявление ошибок в понимании**: сложные структуры могут приводить к потере важных деталей.
* **Диагностика устойчивости**: проверка, не ухудшается ли качество ответов при информационном шуме.
* **Мониторинг деградации**: отслеживание, как модель ведёт себя при обновлениях.

---

## 3. Примеры стрессовых вводов

* Документы с несколькими темами, перемешанными абзацами.
* Тексты с вложенными цитатами, кодом, таблицами.
* Многослойные инструкции с противоречивыми частями.
* Логические задачи, где условия распределены по всему тексту.

---

## 4. Методы тестирования

### 4.1 Автоматические

* Генерация тестов с помощью скриптов или LLM (создание длинных, шумных текстов).
* Использование бенчмарков для long-context моделей (например, [LongBench](https://github.com/THUDM/LongBench)).

### 4.2 Ручные

* Составление тестов из реальных документов (контракты, отчёты, техническая документация).
* Добавление «ловушек» — мелких, но критичных фактов в начале или конце текста.

---

## 5. Метрики оценки

* **Accuracy\@fact** — доля корректно извлечённых фактов.
* **Recall по ключевым элементам** — насколько полно ответ покрывает важную информацию.
* **Position bias** — падение качества для фактов, находящихся в начале или конце длинного контекста.
* **Latency** — время обработки длинных запросов.

---

## 6. Смягчение проблем

* Оптимизация chunking-стратегии (semantic splitting, sliding window).
* Рерайтинг длинных вводов для устранения шума.
* Обучение на датасетах с длинными и сложными контекстами.
* Использование моделей с расширенным контекстным окном.
